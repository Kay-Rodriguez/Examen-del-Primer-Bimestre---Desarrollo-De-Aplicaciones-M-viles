{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/KarlaR/Downloads/movistarexamen_project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { IonicModule } from '@ionic/angular';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nlet LoginPage = class LoginPage {\n  constructor(supabaseSvc, router, loadingCtrl, alertCtrl) {\n    this.supabaseSvc = supabaseSvc;\n    this.router = router;\n    this.loadingCtrl = loadingCtrl;\n    this.alertCtrl = alertCtrl;\n    this.email = '';\n    this.password = '';\n  }\n  loginRol(rol) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const loading = yield _this.loadingCtrl.create({\n        message: 'Ingresando...'\n      });\n      yield loading.present();\n      try {\n        yield _this.supabaseSvc.signIn(_this.email, _this.password);\n        const perfil = yield _this.supabaseSvc.getPerfilActual();\n        if (rol === 'usuario' && perfil?.rol === 'usuario_registrado') {\n          _this.router.navigateByUrl('/user/home', {\n            replaceUrl: true\n          });\n        } else if (rol === 'asesor' && perfil?.rol === 'asesor_comercial') {\n          _this.router.navigateByUrl('/asesor/dashboard', {\n            replaceUrl: true\n          });\n        } else {\n          const alert = yield _this.alertCtrl.create({\n            header: 'Rol incorrecto',\n            message: 'No tienes permisos para ingresar como ' + rol,\n            buttons: ['OK']\n          });\n          yield alert.present();\n        }\n      } catch (error) {\n        const alert = yield _this.alertCtrl.create({\n          header: 'Error',\n          message: error.message ?? 'Error al iniciar sesi√≥n',\n          buttons: ['OK']\n        });\n        yield alert.present();\n      } finally {\n        loading.dismiss();\n      }\n    })();\n  }\n};\nLoginPage = __decorate([Component({\n  selector: 'app-login',\n  imports: [IonicModule, CommonModule, FormsModule, RouterModule],\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss']\n})], LoginPage);\nexport { LoginPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}