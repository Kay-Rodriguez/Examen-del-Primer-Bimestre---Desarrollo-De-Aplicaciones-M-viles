{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport VectorIndexApi from './VectorIndexApi';\nimport VectorDataApi from './VectorDataApi';\nimport VectorBucketApi from './VectorBucketApi';\n/**\n * Main client for interacting with S3 Vectors API\n * Provides access to bucket, index, and vector data operations\n *\n * **Usage Patterns:**\n *\n * 1. **Via StorageClient (recommended for most use cases):**\n * ```typescript\n * import { StorageClient } from '@supabase/storage-js'\n *\n * const storageClient = new StorageClient(url, headers)\n * const vectors = storageClient.vectors\n *\n * // Use vector operations\n * await vectors.createBucket('embeddings-prod')\n * const bucket = vectors.from('embeddings-prod')\n * await bucket.createIndex({ ... })\n * ```\n *\n * 2. **Standalone (for vector-only applications):**\n * ```typescript\n * import { StorageVectorsClient } from '@supabase/storage-js'\n *\n * const vectorsClient = new StorageVectorsClient('https://api.example.com', {\n *   headers: { 'Authorization': 'Bearer token' }\n * })\n *\n * // Access bucket operations\n * await vectorsClient.createBucket('embeddings-prod')\n *\n * // Access index operations via buckets\n * const bucket = vectorsClient.from('embeddings-prod')\n * await bucket.createIndex({\n *   indexName: 'documents',\n *   dataType: 'float32',\n *   dimension: 1536,\n *   distanceMetric: 'cosine'\n * })\n *\n * // Access vector operations via index\n * const index = bucket.index('documents')\n * await index.putVectors({\n *   vectors: [\n *     { key: 'doc-1', data: { float32: [...] }, metadata: { title: 'Intro' } }\n *   ]\n * })\n *\n * // Query similar vectors\n * const { data } = await index.queryVectors({\n *   queryVector: { float32: [...] },\n *   topK: 5,\n *   returnDistance: true\n * })\n * ```\n */\nexport class StorageVectorsClient extends VectorBucketApi {\n  constructor(url, options = {}) {\n    super(url, options.headers || {}, options.fetch);\n  }\n  /**\n   * Access operations for a specific vector bucket\n   * Returns a scoped client for index and vector operations within the bucket\n   *\n   * @param vectorBucketName - Name of the vector bucket\n   * @returns Bucket-scoped client with index and vector operations\n   *\n   * @example\n   * ```typescript\n   * const bucket = client.bucket('embeddings-prod')\n   *\n   * // Create an index in this bucket\n   * await bucket.createIndex({\n   *   indexName: 'documents-openai',\n   *   dataType: 'float32',\n   *   dimension: 1536,\n   *   distanceMetric: 'cosine'\n   * })\n   *\n   * // List indexes in this bucket\n   * const { data } = await bucket.listIndexes()\n   * ```\n   */\n  from(vectorBucketName) {\n    return new VectorBucketScope(this.url, this.headers, vectorBucketName, this.fetch);\n  }\n}\n/**\n * Scoped client for operations within a specific vector bucket\n * Provides index management and access to vector operations\n */\nexport class VectorBucketScope extends VectorIndexApi {\n  constructor(url, headers, vectorBucketName, fetch) {\n    super(url, headers, fetch);\n    this.vectorBucketName = vectorBucketName;\n  }\n  /**\n   * Creates a new vector index in this bucket\n   * Convenience method that automatically includes the bucket name\n   *\n   * @param options - Index configuration (vectorBucketName is automatically set)\n   * @returns Promise with empty response on success or error\n   *\n   * @example\n   * ```typescript\n   * const bucket = client.bucket('embeddings-prod')\n   * await bucket.createIndex({\n   *   indexName: 'documents-openai',\n   *   dataType: 'float32',\n   *   dimension: 1536,\n   *   distanceMetric: 'cosine',\n   *   metadataConfiguration: {\n   *     nonFilterableMetadataKeys: ['raw_text']\n   *   }\n   * })\n   * ```\n   */\n  createIndex(options) {\n    const _super = Object.create(null, {\n      createIndex: {\n        get: () => super.createIndex\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.createIndex.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName\n      }));\n    });\n  }\n  /**\n   * Lists indexes in this bucket\n   * Convenience method that automatically includes the bucket name\n   *\n   * @param options - Listing options (vectorBucketName is automatically set)\n   * @returns Promise with list of indexes or error\n   *\n   * @example\n   * ```typescript\n   * const bucket = client.bucket('embeddings-prod')\n   * const { data } = await bucket.listIndexes({ prefix: 'documents-' })\n   * ```\n   */\n  listIndexes() {\n    const _super = Object.create(null, {\n      listIndexes: {\n        get: () => super.listIndexes\n      }\n    });\n    return __awaiter(this, arguments, void 0, function* (options = {}) {\n      return _super.listIndexes.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName\n      }));\n    });\n  }\n  /**\n   * Retrieves metadata for a specific index in this bucket\n   * Convenience method that automatically includes the bucket name\n   *\n   * @param indexName - Name of the index to retrieve\n   * @returns Promise with index metadata or error\n   *\n   * @example\n   * ```typescript\n   * const bucket = client.bucket('embeddings-prod')\n   * const { data } = await bucket.getIndex('documents-openai')\n   * console.log('Dimension:', data?.index.dimension)\n   * ```\n   */\n  getIndex(indexName) {\n    const _super = Object.create(null, {\n      getIndex: {\n        get: () => super.getIndex\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.getIndex.call(this, this.vectorBucketName, indexName);\n    });\n  }\n  /**\n   * Deletes an index from this bucket\n   * Convenience method that automatically includes the bucket name\n   *\n   * @param indexName - Name of the index to delete\n   * @returns Promise with empty response on success or error\n   *\n   * @example\n   * ```typescript\n   * const bucket = client.bucket('embeddings-prod')\n   * await bucket.deleteIndex('old-index')\n   * ```\n   */\n  deleteIndex(indexName) {\n    const _super = Object.create(null, {\n      deleteIndex: {\n        get: () => super.deleteIndex\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.deleteIndex.call(this, this.vectorBucketName, indexName);\n    });\n  }\n  /**\n   * Access operations for a specific index within this bucket\n   * Returns a scoped client for vector data operations\n   *\n   * @param indexName - Name of the index\n   * @returns Index-scoped client with vector data operations\n   *\n   * @example\n   * ```typescript\n   * const index = client.bucket('embeddings-prod').index('documents-openai')\n   *\n   * // Insert vectors\n   * await index.putVectors({\n   *   vectors: [\n   *     { key: 'doc-1', data: { float32: [...] }, metadata: { title: 'Intro' } }\n   *   ]\n   * })\n   *\n   * // Query similar vectors\n   * const { data } = await index.queryVectors({\n   *   queryVector: { float32: [...] },\n   *   topK: 5\n   * })\n   * ```\n   */\n  index(indexName) {\n    return new VectorIndexScope(this.url, this.headers, this.vectorBucketName, indexName, this.fetch);\n  }\n}\n/**\n * Scoped client for operations within a specific vector index\n * Provides vector data operations (put, get, list, query, delete)\n */\nexport class VectorIndexScope extends VectorDataApi {\n  constructor(url, headers, vectorBucketName, indexName, fetch) {\n    super(url, headers, fetch);\n    this.vectorBucketName = vectorBucketName;\n    this.indexName = indexName;\n  }\n  /**\n   * Inserts or updates vectors in this index\n   * Convenience method that automatically includes bucket and index names\n   *\n   * @param options - Vector insertion options (bucket and index names automatically set)\n   * @returns Promise with empty response on success or error\n   *\n   * @example\n   * ```typescript\n   * const index = client.bucket('embeddings-prod').index('documents-openai')\n   * await index.putVectors({\n   *   vectors: [\n   *     {\n   *       key: 'doc-1',\n   *       data: { float32: [0.1, 0.2, ...] },\n   *       metadata: { title: 'Introduction', page: 1 }\n   *     }\n   *   ]\n   * })\n   * ```\n   */\n  putVectors(options) {\n    const _super = Object.create(null, {\n      putVectors: {\n        get: () => super.putVectors\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.putVectors.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName,\n        indexName: this.indexName\n      }));\n    });\n  }\n  /**\n   * Retrieves vectors by keys from this index\n   * Convenience method that automatically includes bucket and index names\n   *\n   * @param options - Vector retrieval options (bucket and index names automatically set)\n   * @returns Promise with array of vectors or error\n   *\n   * @example\n   * ```typescript\n   * const index = client.bucket('embeddings-prod').index('documents-openai')\n   * const { data } = await index.getVectors({\n   *   keys: ['doc-1', 'doc-2'],\n   *   returnMetadata: true\n   * })\n   * ```\n   */\n  getVectors(options) {\n    const _super = Object.create(null, {\n      getVectors: {\n        get: () => super.getVectors\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.getVectors.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName,\n        indexName: this.indexName\n      }));\n    });\n  }\n  /**\n   * Lists vectors in this index with pagination\n   * Convenience method that automatically includes bucket and index names\n   *\n   * @param options - Listing options (bucket and index names automatically set)\n   * @returns Promise with array of vectors and pagination token\n   *\n   * @example\n   * ```typescript\n   * const index = client.bucket('embeddings-prod').index('documents-openai')\n   * const { data } = await index.listVectors({\n   *   maxResults: 500,\n   *   returnMetadata: true\n   * })\n   * ```\n   */\n  listVectors() {\n    const _super = Object.create(null, {\n      listVectors: {\n        get: () => super.listVectors\n      }\n    });\n    return __awaiter(this, arguments, void 0, function* (options = {}) {\n      return _super.listVectors.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName,\n        indexName: this.indexName\n      }));\n    });\n  }\n  /**\n   * Queries for similar vectors in this index\n   * Convenience method that automatically includes bucket and index names\n   *\n   * @param options - Query options (bucket and index names automatically set)\n   * @returns Promise with array of similar vectors ordered by distance\n   *\n   * @example\n   * ```typescript\n   * const index = client.bucket('embeddings-prod').index('documents-openai')\n   * const { data } = await index.queryVectors({\n   *   queryVector: { float32: [0.1, 0.2, ...] },\n   *   topK: 5,\n   *   filter: { category: 'technical' },\n   *   returnDistance: true,\n   *   returnMetadata: true\n   * })\n   * ```\n   */\n  queryVectors(options) {\n    const _super = Object.create(null, {\n      queryVectors: {\n        get: () => super.queryVectors\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.queryVectors.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName,\n        indexName: this.indexName\n      }));\n    });\n  }\n  /**\n   * Deletes vectors by keys from this index\n   * Convenience method that automatically includes bucket and index names\n   *\n   * @param options - Deletion options (bucket and index names automatically set)\n   * @returns Promise with empty response on success or error\n   *\n   * @example\n   * ```typescript\n   * const index = client.bucket('embeddings-prod').index('documents-openai')\n   * await index.deleteVectors({\n   *   keys: ['doc-1', 'doc-2', 'doc-3']\n   * })\n   * ```\n   */\n  deleteVectors(options) {\n    const _super = Object.create(null, {\n      deleteVectors: {\n        get: () => super.deleteVectors\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.deleteVectors.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName,\n        indexName: this.indexName\n      }));\n    });\n  }\n}\n//# sourceMappingURL=StorageVectorsClient.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}