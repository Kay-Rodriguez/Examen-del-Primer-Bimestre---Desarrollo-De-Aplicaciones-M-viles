{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/KarlaR/Downloads/movistarexamen_project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/supabase\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction HomePage_ion_spinner_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-spinner\", 11);\n  }\n}\nfunction HomePage_ion_card_15_p_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵelement(1, \"ion-icon\", 28);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const p_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", p_r2.promocion, \" \");\n  }\n}\nfunction HomePage_ion_card_15_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"h4\");\n    i0.ɵɵtext(2, \"Informaci\\u00F3n del plan\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\")(4, \"li\")(5, \"strong\");\n    i0.ɵɵtext(6, \"Segmento:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"li\")(9, \"strong\");\n    i0.ɵɵtext(10, \"P\\u00FAblico Objetivo:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"li\")(13, \"strong\");\n    i0.ɵɵtext(14, \"Datos:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"li\")(17, \"strong\");\n    i0.ɵɵtext(18, \"Minutos:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", p_r2.segmento, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", p_r2.publico_objetivo, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", p_r2.gb_datos, \" GB\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", p_r2.minutos, \" nacionales\");\n  }\n}\nfunction HomePage_ion_card_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\", 12)(1, \"div\", 13)(2, \"div\", 14)(3, \"h3\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 15);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 16);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 17)(10, \"span\", 18);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"small\");\n    i0.ɵɵtext(13, \"/mes\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"ion-card-content\")(15, \"p\", 19);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 20)(18, \"p\");\n    i0.ɵɵelement(19, \"ion-icon\", 21);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"p\");\n    i0.ɵɵelement(22, \"ion-icon\", 22);\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(24, HomePage_ion_card_15_p_24_Template, 3, 1, \"p\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"div\", 24)(26, \"ion-button\", 25);\n    i0.ɵɵlistener(\"click\", function HomePage_ion_card_15_Template_ion_button_click_26_listener() {\n      const p_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.toggleDetalle(p_r2));\n    });\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"ion-button\", 26);\n    i0.ɵɵlistener(\"click\", function HomePage_ion_card_15_Template_ion_button_click_28_listener() {\n      const p_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.contratar(p_r2));\n    });\n    i0.ɵɵtext(29, \" Contratar \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(30, HomePage_ion_card_15_div_30_Template, 20, 4, \"div\", 27);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r2 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(p_r2.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r2.segmento);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r2.publico_objetivo);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"$\", p_r2.precio_mensual, \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(p_r2.descripcion);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", p_r2.gb_datos, \" GB de datos \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", p_r2.minutos, \" minutos nacionales \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", p_r2.promocion);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", p_r2._show ? \"Ocultar Detalles\" : \"Ver Detalles\", \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", p_r2._show);\n  }\n}\nexport let HomePage = /*#__PURE__*/(() => {\n  class HomePage {\n    constructor(supabaseSvc, toastCtrl, loadingCtrl) {\n      this.supabaseSvc = supabaseSvc;\n      this.toastCtrl = toastCtrl;\n      this.loadingCtrl = loadingCtrl;\n      this.filtro = '';\n      this.planes = [];\n      this.cargando = false;\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.cargarPlanes();\n      })();\n    }\n    get planesFiltrados() {\n      const f = this.filtro.toLowerCase();\n      return this.planes.filter(p => (p.nombre || '').toLowerCase().includes(f) || (p.segmento || '').toLowerCase().includes(f) || (p.publico_objetivo || '').toLowerCase().includes(f));\n    }\n    cargarPlanes() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        _this2.cargando = true;\n        try {\n          _this2.planes = yield _this2.supabaseSvc.getPlanesPublicos();\n        } catch (err) {\n          console.error(err);\n          _this2.toast('Error al cargar planes');\n        } finally {\n          _this2.cargando = false;\n        }\n      })();\n    }\n    toggleDetalle(p) {\n      p._show = !p._show;\n    }\n    contratar(p) {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const loading = yield _this3.loadingCtrl.create({\n          message: 'Enviando solicitud...'\n        });\n        yield loading.present();\n        try {\n          yield _this3.supabaseSvc.contratarPlan(p.id);\n          _this3.toast('Solicitud enviada. Un asesor te contactará.');\n        } catch (err) {\n          console.error(err);\n          _this3.toast('No se pudo enviar la solicitud');\n        } finally {\n          loading.dismiss();\n        }\n      })();\n    }\n    toast(msg) {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        const t = yield _this4.toastCtrl.create({\n          message: msg,\n          duration: 2500,\n          color: 'primary',\n          position: 'top'\n        });\n        t.present();\n      })();\n    }\n    static {\n      this.ɵfac = function HomePage_Factory(t) {\n        return new (t || HomePage)(i0.ɵɵdirectiveInject(i1.SupabaseService), i0.ɵɵdirectiveInject(i2.ToastController), i0.ɵɵdirectiveInject(i2.LoadingController));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: HomePage,\n        selectors: [[\"app-home\"]],\n        decls: 16,\n        vars: 3,\n        consts: [[\"color\", \"primary\"], [1, \"ion-padding\"], [1, \"banner\"], [\"src\", \"https://blog.movistar.com.ec/wp-content/uploads/2025/01/Cuenca-Xavier-Calderon-Jose-Andres-Caballero-Ecuador-nos-mueve-1024x574.jpg\"], [\"src\", \"https://blog.movistar.com.ec/wp-content/uploads/2025/01/ECUADOR-NOS-MUEVE-Olon-Jose-Andres-Caballero-Xavier-Calderon-Movistar-1024x576.jpg\"], [1, \"search-bar\"], [\"name\", \"search-outline\", \"slot\", \"start\"], [\"placeholder\", \"Buscar por nombre, segmento o p\\u00FAblico\", 3, \"ngModelChange\", \"ngModel\"], [1, \"titulo-seccion\"], [\"name\", \"crescent\", 4, \"ngIf\"], [\"class\", \"card-plan\", 4, \"ngFor\", \"ngForOf\"], [\"name\", \"crescent\"], [1, \"card-plan\"], [1, \"card-top\"], [1, \"card-info\"], [1, \"segmento\"], [1, \"publico\"], [1, \"card-precio\"], [1, \"precio\"], [1, \"descripcion\"], [1, \"datos-basicos\"], [\"name\", \"cellular-outline\"], [\"name\", \"call-outline\"], [4, \"ngIf\"], [1, \"acciones\"], [\"size\", \"small\", \"fill\", \"outline\", \"color\", \"tertiary\", 3, \"click\"], [\"size\", \"small\", 1, \"btn-contratar\", 3, \"click\"], [\"class\", \"detalles\", 4, \"ngIf\"], [\"name\", \"sparkles-outline\"], [1, \"detalles\"]],\n        template: function HomePage_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\", 0)(2, \"ion-title\");\n            i0.ɵɵtext(3, \"Cat\\u00E1logo de Planes\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(4, \"ion-content\", 1)(5, \"div\", 2);\n            i0.ɵɵelement(6, \"img\", 3)(7, \"img\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"ion-item\", 5);\n            i0.ɵɵelement(9, \"ion-icon\", 6);\n            i0.ɵɵelementStart(10, \"ion-input\", 7);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function HomePage_Template_ion_input_ngModelChange_10_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.filtro, $event) || (ctx.filtro = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(11, \"h2\", 8);\n            i0.ɵɵtext(12, \"Planes Disponibles\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(13, HomePage_ion_spinner_13_Template, 1, 0, \"ion-spinner\", 9);\n            i0.ɵɵelementStart(14, \"ion-list\");\n            i0.ɵɵtemplate(15, HomePage_ion_card_15_Template, 31, 10, \"ion-card\", 10);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(10);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.filtro);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.cargando);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.planesFiltrados);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i4.NgControlStatus, i4.NgModel, i2.IonButton, i2.IonCard, i2.IonCardContent, i2.IonContent, i2.IonHeader, i2.IonIcon, i2.IonInput, i2.IonItem, i2.IonList, i2.IonSpinner, i2.IonTitle, i2.IonToolbar, i2.TextValueAccessor],\n        styles: [\".banner[_ngcontent-%COMP%]{display:flex;gap:8px;margin-bottom:14px}.banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;border-radius:14px;object-fit:cover;height:110px}.search-bar[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:999px;--background: #f2f4ff}.titulo-seccion[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin:10px 0}.card-plan[_ngcontent-%COMP%]{border-radius:18px;box-shadow:0 6px 16px #0000000f;margin-bottom:14px}.card-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:14px 16px 0}.card-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:700}.segmento[_ngcontent-%COMP%]{margin:2px 0;font-size:13px;color:#666}.publico[_ngcontent-%COMP%]{font-size:12px;color:#888}.card-precio[_ngcontent-%COMP%]{text-align:right}.card-precio[_ngcontent-%COMP%]   .precio[_ngcontent-%COMP%]{font-size:22px;font-weight:800;color:#3b055f}.card-precio[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;font-size:12px;color:#777}.descripcion[_ngcontent-%COMP%]{margin-top:6px;font-size:13px;color:#555}.datos-basicos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin:4px 0}.datos-basicos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px;vertical-align:middle}.acciones[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:8px}.btn-contratar[_ngcontent-%COMP%]{--background: linear-gradient(90deg, #00c853, #009624);--border-radius: 999px;font-weight:600}.detalles[_ngcontent-%COMP%]{margin-top:10px;padding-top:8px;border-top:1px solid #eee}.detalles[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;margin-bottom:4px}.detalles[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:18px;font-size:13px}\"]\n      });\n    }\n  }\n  return HomePage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}