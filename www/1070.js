"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1070],{1070:(b,u,r)=>{r.r(u),r.d(u,{LoginPageModule:()=>f});var d=r(177),o=r(8974),g=r(4341),c=r(70),p=r(467),n=r(4438),m=r(9593);let h=(()=>{class a{constructor(l,t,e,i){this.supabaseSvc=l,this.router=t,this.loadingCtrl=e,this.alertCtrl=i,this.email="",this.password=""}loginRol(l){var t=this;return(0,p.A)(function*(){const e=yield t.loadingCtrl.create({message:"Ingresando..."});yield e.present();try{yield t.supabaseSvc.signIn(t.email,t.password);const i=yield t.supabaseSvc.getPerfilActual();"usuario"===l&&"usuario_registrado"===i?.rol?t.router.navigateByUrl("/user/home",{replaceUrl:!0}):"asesor"===l&&"asesor_comercial"===i?.rol?t.router.navigateByUrl("/asesor/dashboard",{replaceUrl:!0}):yield(yield t.alertCtrl.create({header:"Rol incorrecto",message:"No tienes permisos para ingresar como "+l,buttons:["OK"]})).present()}catch(i){yield(yield t.alertCtrl.create({header:"Error",message:i.message??"Error al iniciar sesi\xf3n",buttons:["OK"]})).present()}finally{e.dismiss()}})()}static{this.\u0275fac=function(t){return new(t||a)(n.rXU(m.w),n.rXU(c.Ix),n.rXU(o.Xi),n.rXU(o.hG))}}static{this.\u0275cmp=n.VBU({type:a,selectors:[["app-login"]],decls:29,vars:2,consts:[["color","primary"],["slot","start"],["defaultHref","/welcome"],[1,"ion-padding","login-contenedor"],[1,"login-layout"],[1,"login-img"],["src","assets/planes/tingo.jpg"],[1,"login-form"],[1,"titulo-login"],[1,"subtitulo-login"],["position","floating"],["type","email","name","email",3,"ngModelChange","ngModel"],["type","password","name","password",3,"ngModelChange","ngModel"],["expand","block",1,"btn-usuario",3,"click"],["expand","block",1,"btn-asesor",3,"click"],["fill","clear","expand","block","routerLink","/register",1,"btn-crear"]],template:function(t,e){1&t&&(n.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),n.nrm(3,"ion-back-button",2),n.k0s(),n.j41(4,"ion-title"),n.EFF(5,"Iniciar Sesi\xf3n"),n.k0s()()(),n.j41(6,"ion-content",3)(7,"div",4)(8,"div",5),n.nrm(9,"img",6),n.k0s(),n.j41(10,"div",7)(11,"h2",8),n.EFF(12,"Bienvenido"),n.k0s(),n.j41(13,"p",9),n.EFF(14,"Ingresa tus credenciales para continuar"),n.k0s(),n.j41(15,"ion-item")(16,"ion-label",10),n.EFF(17,"Email"),n.k0s(),n.j41(18,"ion-input",11),n.mxI("ngModelChange",function(s){return n.DH7(e.email,s)||(e.email=s),s}),n.k0s()(),n.j41(19,"ion-item")(20,"ion-label",10),n.EFF(21,"Contrase\xf1a"),n.k0s(),n.j41(22,"ion-input",12),n.mxI("ngModelChange",function(s){return n.DH7(e.password,s)||(e.password=s),s}),n.k0s()(),n.j41(23,"ion-button",13),n.bIt("click",function(){return e.loginRol("usuario")}),n.EFF(24," Entrar como Usuario "),n.k0s(),n.j41(25,"ion-button",14),n.bIt("click",function(){return e.loginRol("asesor")}),n.EFF(26," Entrar como Asesor "),n.k0s(),n.j41(27,"ion-button",15),n.EFF(28," Crear cuenta nueva "),n.k0s()()()()),2&t&&(n.R7$(18),n.R50("ngModel",e.email),n.R7$(4),n.R50("ngModel",e.password))},dependencies:[o.Jm,o.QW,o.W9,o.eU,o.$w,o.uz,o.he,o.BC,o.ai,o.Gw,o.el,o.N7,g.BC,g.vS,c.Wk],styles:[".login-contenedor[_ngcontent-%COMP%]{display:flex;justify-content:center}.login-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:25px;width:500%;max-width:1300px;align-items:center}.login-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:800%;height:800%;object-fit:cover;border-radius:14px;box-shadow:0 3px 12px #0003}.login-form[_ngcontent-%COMP%]{width:100%}.titulo-login[_ngcontent-%COMP%]{margin-bottom:5px;font-size:34px;font-weight:700}.subtitulo-login[_ngcontent-%COMP%]{margin-bottom:20px;color:#444}.btn-usuario[_ngcontent-%COMP%]{--background: #0039ff;--background-hover: #234bff;border-radius:12px;font-weight:700;margin-top:15px}.btn-asesor[_ngcontent-%COMP%]{--background: #990a9e;--background-hover: #740cb9;border-radius:12px;font-weight:700}.btn-crear[_ngcontent-%COMP%]{font-weight:700;margin-top:10px;color:#0039ff!important}@media (max-width: 700px){.login-layout[_ngcontent-%COMP%]{grid-template-columns:1fr}.login-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:250px}}"]})}}return a})(),f=(()=>{class a{static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275mod=n.$C({type:a})}static{this.\u0275inj=n.G2t({imports:[d.MD,o.bv,g.YN,c.iI.forChild([{path:"",component:h}])]})}}return a})()}}]);